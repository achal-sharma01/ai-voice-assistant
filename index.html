!doctype html
html lang=en
head
meta charset=utf-8
meta name=viewport content=width=device-width,initial-scale=1
titleAstra ‚Äì Pro Voice Assistant (Mobile)title
meta name=theme-color content=#0ea5e9
style
root{--bg#0b1220;--card#0f172a;--text#e5e7eb;--muted#94a3b8;--accent#0ea5e9;--good#22c55e;--bad#ef4444}
{box-sizingborder-box}html,body{height100%}body{margin0;backgroundlinear-gradient(180deg,#0b1220,#0a1020);colorvar(--text);font-familysystem-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial}
.wrap{max-width640px;margin0 auto;padding18px}
.card{backgroundlinear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border1px solid rgba(255,255,255,.14);border-radius18px;padding18px;backdrop-filterblur(8px);box-shadow0 10px 40px rgba(0,0,0,.35)}
h1{font-size22px;margin0 0 6px} .sub{colorvar(--muted);font-size14px;margin0 0 12px}
.row{displayflex;gap8px;flex-wrapwrap;align-itemscenter}
.badge{font-size12px;padding6px 10px;border1px solid rgba(255,255,255,.14);border-radius999px;colorvar(--muted)}
.grid{displaygrid;grid-template-columns1fr 1fr;gap10px}
.input,select,button{width100%;padding10px 12px;border-radius12px;border1px solid rgba(255,255,255,.14);backgroundrgba(2,6,23,.45);colorvar(--text);font-size14px}
.btn{cursorpointer} .btn.accent{backgroundlinear-gradient(180deg,rgba(14,165,233,.25),rgba(14,165,233,.06));border-colorrgba(14,165,233,.5)}
.mic{width120px;height120px;border-radius999px;margin12px auto;displaygrid;place-itemscenter;backgroundradial-gradient(60% 60% at 50% 30%,rgba(14,165,233,.25),transparent),linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));box-shadowinset 0 0 0 2px rgba(14,165,233,.35),0 10px 30px rgba(14,165,233,.25);border0;font-size34px}
.mic.live{box-shadowinset 0 0 0 3px rgba(34,197,94,.6),0 10px 30px rgba(34,197,94,.35)}
.status{displayflex;gap8px;align-itemscenter;justify-contentcenter;colorvar(--muted);font-size13px}
.dot{width10px;height10px;border-radius50%;backgroundvar(--bad)} .dot.ok{backgroundvar(--good)}
.section{margin-top12px}
.tile{backgroundrgba(2,6,23,.5);border1px solid rgba(255,255,255,.1);border-radius14px;padding12px}
.kpis{displaygrid;grid-template-columnsrepeat(3,1fr);gap10px}
.tile h3{margin0 0 6px;font-size12px;colorvar(--muted)} .tile p{margin0;font-size18px}
.switch{displayflex;align-itemscenter;gap10px}
.switch input{widthauto}
.log{height180px;overflowauto;backgroundrgba(2,6,23,.5);border1px solid rgba(255,255,255,.08);border-radius14px;padding10px;font-size13px}
.log p{margin6px 0}
small.note{colorvar(--muted)}
style
head
body
div class=wrap
  div class=card
    h1ü§ñ Astra ‚Äî Pro Voice Assistanth1
    p class=subMobile web app. Wake word b‚ÄúAstra‚Äùb or Always-on. Speaks, shows live dashboard, manual controls, and daily report. (Offline simulator built-in.)p

    div class=row
      span class=badgeWake bAstrabspan
      span class=badgeMode
        select id=always class=input style=widthauto;displayinline-block
          option value=0 selectedWake wordoption
          option value=1Always-onoption
        select
      span
      span class=badgeSimulator
        select id=sim class=input style=widthauto;displayinline-block
          option value=1 selectedOnoption
          option value=0Offoption
        select
      span
      span class=badgeTTS rate
        select id=rate class=input style=widthauto;displayinline-block
          option170optionoption selected185optionoption200option
        select
      span
    div

    button id=micBtn class=mic title=StartStopüé§button
    div class=statusspan id=dot class=dotspanspan id=statusIdlespandiv

    div class=section kpis
      div class=tileh3Lighth3p id=kLightOFFpdiv
      div class=tileh3Fanh3p id=kFanOFFpdiv
      div class=tileh3Peopleh3p id=kPeople1pdiv
      div class=tileh3Temp (¬∞C)h3p id=kTemp27.0pdiv
      div class=tileh3Humidity (%)h3p id=kHum48.0pdiv
      div class=tileh3Commandsh3p id=kCmds0pdiv
    div

    div class=section grid
      label class=tile switch
        h3 style=min-width60px;margin0Lighth3
        input id=swLight type=checkboxspanTogglespan
      label
      label class=tile switch
        h3 style=min-width60px;margin0Fanh3
        input id=swFan type=checkboxspanTogglespan
      label
    div

    div class=section grid
      button class=btn accent id=btnReportSpeak Daily Reportbutton
      button class=btn id=btnResetReset Countersbutton
    div

    div class=section log id=log aria-live=politediv
    p class=subsmall class=noteTry ‚ÄúAstra hello‚Äù, ‚ÄúAstra what‚Äôs the time‚Äù, ‚ÄúAstra temperature  humidity  people‚Äù, ‚ÄúAstra turn onoff light  fan‚Äù, ‚ÄúAstra report‚Äù, ‚ÄúAstra stop‚Äù.smallp
  div
div

script
 ================== CORE CONFIG (offline today) ==================
const WAKE = astra;    say Astra ... unless Always-on is enabled
 (When we connect Firebase later, we'll add a small block here without changing the UI)

 ================== STATE & ELEMENTS ==================
let listening=false, rec=null, lastHeard=;
let cache={light0, fan0, temp27.0, hum48.0, people1};
let counters={cmds0};

const el=(id)=document.getElementById(id);
const logBox=el('log'), dot=el('dot'), statusEl=el('status');
const kLight=el('kLight'), kFan=el('kFan'), kTemp=el('kTemp'), kHum=el('kHum'), kPeople=el('kPeople'), kCmds=el('kCmds');
const swLight=el('swLight'), swFan=el('swFan'), rateSel=el('rate'), always=el('always'), sim=el('sim'), micBtn=el('micBtn');

 ================== UI HELPERS ==================
function log(t){const p=document.createElement('p');p.textContent=t;logBox.appendChild(p);logBox.scrollTop=logBox.scrollHeight;}
function setStatus(t,ok){statusEl.textContent=t;dot.classList.toggle('ok',!!ok);}
function refreshTiles(){
  kLight.textContent = cache.light ONOFF;
  kFan.textContent   = cache.fan   ONOFF;
  kTemp.textContent  = cache.temp.toFixed(1);
  kHum.textContent   = cache.hum.toFixed(1);
  kPeople.textContent= cache.people;
  kCmds.textContent  = counters.cmds;
  swLight.checked = !!cache.light;
  swFan.checked   = !!cache.fan;
}

 ================== SPEAK ==================
function speak(text){
  try{
    const u=new SpeechSynthesisUtterance(text);
    u.rate = parseInt(rateSel.value,10)185; u.pitch=1;
    speechSynthesis.cancel(); speechSynthesis.speak(u);
    log(Astra +text);
  }catch(e){console.warn(TTS error,e)}
}

 ================== OFFLINE SIMULATION (looks alive) ==================
function simulateSensors(){
  if(sim.value!==1) return;
  cache.temp = Math.max(20, Math.min(35, cache.temp + (Math.random()0.4-0.2)));
  cache.hum  = Math.max(30, Math.min(70, cache.hum  + (Math.random()0.8-0.4)));
  if(Math.random()0.25){  people change sometimes
    cache.people = Math.max(0, cache.people + (Math.random()0.5-11));
  }
  refreshTiles();
}
setInterval(simulateSensors, 1200);

 ================== INTENT PARSER ==================
function intent(text){
  const t=text.toLowerCase().trim();
  let s=t;
  if (always.value!==1){
    if(!t.includes(WAKE)) return {typeidle};
    s=t.split(WAKE).slice(1).join( ).trim();
    if(!s) return {typeidle};
  }
  if((hellohiheygood (morningafternoonevening)).test(s)) return {typegreet};
  if(how are you.test(s)) return {typehow};
  if((what'stell) (the )timetime now.test(s)) return {typetime};
  if(temperaturetemphow hot.test(s)) return {typetemp};
  if(humidityhow humid.test(s)) return {typehum};
  if(peoplecountperson.test(s)) return {typepeople};
  if((turnswitch) on (the )lightlight on.test(s)) return {typelight,val1};
  if((turnswitch) off (the )lightlight off.test(s)) return {typelight,val0};
  if((turnswitch) on (the )fanfan on.test(s)) return {typefan,val1};
  if((turnswitch) off (the )fanfan off.test(s)) return {typefan,val0};
  if(reportsummarystatus.test(s)) return {typereport};
  if(stopexitquit.test(s)) return {typestop};
  return {typechat, raws};
}

 ================== ACTIONS ==================
function setDevice(dev,val){
  cache[dev]=val10; refreshTiles();
  speak(val`Turning on the ${dev}.``Turning the ${dev} off.`);
}
function makeReport(){
  const parts=[];
  parts.push(`Commands today ${counters.cmds}.`);
  parts.push(`Light is ${cache.light'on''off'}. Fan is ${cache.fan'on''off'}.`);
  parts.push(`Temperature ${cache.temp.toFixed(1)} degrees Celsius, humidity ${cache.hum.toFixed(1)} percent.`);
  parts.push(`People count ${cache.people}.`);
  return parts.join( );
}
function handleIntent(res){
  switch(res.type){
    case idle return;
    case greet{
      const h=new Date().getHours();
      const g=h12Good morningh18Good afternoonGood evening;
      return speak(`${g}, Achal. How can I help`);
    }
    case how return speak(All systems ready.);
    case time return speak(It's +new Date().toLocaleTimeString([], {hour'2-digit', minute'2-digit'}));
    case temp return speak(`Temperature is ${cache.temp.toFixed(1)} degrees Celsius.`);
    case hum  return speak(`Humidity is ${cache.hum.toFixed(1)} percent.`);
    case people return speak(`People in room ${cache.people}.`);
    case light counters.cmds++; return setDevice(light,res.val);
    case fan   counters.cmds++; return setDevice(fan,res.val);
    case report return speak(makeReport());
    case stop stopListening(); return speak(Stopping now. Bye!);
    case chat return speak([Okay.,Noted.,I hear you.,Sure.][Math.floor(Math.random()4)]+ +res.raw);
  }
}

 ================== SPEECH RECOGNITION ==================
function getRecognizer(){
  const SR = window.SpeechRecognition  window.webkitSpeechRecognition;
  if(!SR){ alert(SpeechRecognition not supported. Use Chrome on Android with HTTPS.); return null; }
  const r = new SR();
  r.lang=en-US; r.continuous=true; r.interimResults=false; r.maxAlternatives=1;
  r.onstart=()={ setStatus(Listening‚Ä¶,true); micBtn.classList.add('live'); };
  r.onend=()={ setStatus(Idle,false); micBtn.classList.remove('live'); if(listening) r.start(); };
  r.onerror=(e)={ log(STT error +(e.errorunknown)); };
  r.onresult=(e)={ const t=e.results[e.resultIndex][0].transcript; lastHeard=t; log(You +t); handleIntent(intent(t)); };
  return r;
}
function startListening(){ if(listening) return; const r=getRecognizer(); if(!r) return; rec=r; listening=true; speechSynthesis.cancel(); rec.start(); }
function stopListening(){ listening=false; try{ rec && rec.stop(); }catch{} }

 ================== EVENTS ==================
micBtn.addEventListener('click', ()= listeningstopListening()startListening());
swLight.addEventListener('change', e= handleIntent({typelight, val e.target.checked10}));
swFan.addEventListener('change', e= handleIntent({typefan, val e.target.checked10}));
document.getElementById('btnReport').addEventListener('click', ()= speak(makeReport()));
document.getElementById('btnReset').addEventListener('click', ()={ counters={cmds0}; speak(Counters reset.); refreshTiles(); });

 greet + initial UI
setTimeout(()= speak('Hi Achal, Astra is ready. Tap the mic and say Astra.'),300);
refreshTiles();
script
body
html
